---
const features = [
  {
    icon: `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/>
      <path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/>
      <path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/>
      <path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/>
    </svg>`,
    title: 'Virtual Threads',
    description: 'Every connection runs on a JDK 21 virtual thread. Massive scalability with no thread-pool tuning.',
    detail: `<p>Every connection gets its own <strong>JDK 21 virtual thread</strong>. Write blocking code — the JVM handles the rest.</p>
<div class="detail-stats">
  <div class="detail-stat"><span class="detail-stat-value">~1 KB</span><span class="detail-stat-label">per thread</span></div>
  <div class="detail-stat"><span class="detail-stat-value">1M+</span><span class="detail-stat-label">connections</span></div>
  <div class="detail-stat"><span class="detail-stat-value">0</span><span class="detail-stat-label">pool config</span></div>
</div>
<ul>
<li>Block freely — database calls, REST, LLM inference</li>
<li>No async callbacks, no reactive wrappers</li>
<li>JVM parks the thread on I/O automatically</li>
</ul>`,
    wikiLink: 'https://github.com/Atmosphere/atmosphere/wiki',
  },
  {
    icon: `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/>
      <path d="m9 12 2 2 4-4"/>
    </svg>`,
    title: 'WebSocket + Fallbacks',
    description: 'First-class WebSocket with automatic degradation to SSE and long-polling. Heartbeats and reconnection built in.',
    detail: `<p>Automatically picks <strong>WebSocket → SSE → long-polling</strong> based on what the client and network support. Your code never changes.</p>
<ul>
<li><strong>Heartbeats</strong> — detect dead connections before TCP timeouts</li>
<li><strong>Auto-reconnect</strong> — exponential backoff with jitter</li>
<li><strong>Message cache</strong> — replay missed messages on reconnect</li>
<li><strong>Proxy-safe</strong> — works behind CDNs and load balancers</li>
</ul>`,
    wikiLink: 'https://github.com/Atmosphere/atmosphere/wiki/Getting-Started-with-atmosphere.js',
  },
  {
    icon: `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
      <circle cx="9" cy="7" r="4"/>
      <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
      <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
    </svg>`,
    title: 'Rooms & Presence',
    description: 'Built-in room management with presence tracking, message history, and authorization. No external dependencies.',
    detail: `<p>Named groups of connections with <strong>everything built in</strong> — no external dependencies needed.</p>
<ul>
<li><strong>Presence</strong> — real-time join/leave events, member lists</li>
<li><strong>History</strong> — configurable cache, replayed on join</li>
<li><strong>Direct messaging</strong> — send to a specific member by ID</li>
<li><strong>Authorization</strong> — accept or reject join requests</li>
<li><strong>Virtual members</strong> — AI agents and bots as room participants</li>
</ul>`,
    wikiLink: 'https://github.com/Atmosphere/atmosphere/wiki/Understanding-Rooms',
  },
  {
    icon: `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="16 18 22 12 16 6"/>
      <polyline points="8 6 2 12 8 18"/>
    </svg>`,
    title: 'Simple Annotations',
    description: 'Define endpoints with @ManagedService or @RoomService. Handle lifecycle with @Ready, @Message, @Disconnect. Kotlin DSL available.',
    detail: `<p>Two annotations, four lifecycle hooks. That's the entire API.</p>
<div class="detail-columns">
<div>
<h4>@ManagedService</h4>
<p>General-purpose pub/sub, notifications, dashboards — you control the broadcast.</p>
</div>
<div>
<h4>@RoomService</h4>
<p>Rooms with presence, history, and member management — all automatic.</p>
</div>
</div>
<ul>
<li><strong>@Ready</strong> — connection established</li>
<li><strong>@Message</strong> — message received (with JSON codecs)</li>
<li><strong>@Disconnect</strong> — client left or timed out</li>
<li><strong>@Heartbeat</strong> — keep-alive received</li>
</ul>
<p>Also available as a <strong>Kotlin DSL</strong> with coroutine support.</p>`,
    wikiLink: 'https://github.com/Atmosphere/atmosphere/wiki/Understanding-ManagedService',
  },
  {
    icon: `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
      <polyline points="3.29 7 12 12 20.71 7"/>
      <line x1="12" y1="22" x2="12" y2="12"/>
    </svg>`,
    title: 'Kafka & Redis Clustering',
    description: 'Scale across nodes with built-in Kafka and Redis broadcasters. Open source, no commercial add-ons required.',
    detail: `<p>Scale across nodes with <strong>one config change</strong>. Zero code modifications.</p>
<div class="detail-columns">
<div>
<h4>Apache Kafka</h4>
<p>Kafka 3.9 — durable, ordered, high-throughput. Each Broadcaster maps to a topic.</p>
</div>
<div>
<h4>Redis Pub/Sub</h4>
<p>Lettuce 6.5 — ultra-low latency fan-out. Each Broadcaster maps to a channel.</p>
</div>
</div>
<ul>
<li>Messages relayed to all nodes automatically</li>
<li>Deduplication built in — exactly-once delivery</li>
<li>Fully open source — no commercial add-ons</li>
</ul>`,
    wikiLink: 'https://github.com/Atmosphere/atmosphere/wiki/Clustering-Kafka-and-Redis',
  },
  {
    icon: `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 2a4 4 0 0 0-4 4v2H6a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2h-2V6a4 4 0 0 0-4-4z"/>
      <circle cx="12" cy="15" r="2"/>
      <path d="M12 17v2"/>
    </svg>`,
    title: 'AI/LLM Streaming + MCP',
    description: 'Built-in AI transport with @AiEndpoint, OpenAI-compatible client, framework adapters, and MCP server support.',
    detail: `<p>Atmosphere provides the <strong>server ↔ browser transport layer</strong> for AI apps, while your model framework handles inference.</p>
<ul>
<li><strong>@AiEndpoint + @Prompt</strong> — AI endpoint lifecycle with virtual-thread prompt handlers</li>
<li><strong>OpenAiCompatibleClient</strong> — Gemini, OpenAI, Ollama, and OpenAI-compatible APIs</li>
<li><strong>Adapter SPI</strong> — Spring AI Flux, LangChain4j callbacks, and Embabel agent events</li>
              <li><strong>StreamingSession protocol</strong> — content/progress/metadata/complete/error frames with ordering</li>
<li><strong>LlmRoomMember</strong> — add AI assistants as virtual room participants</li>
<li><strong>MCP annotations</strong> — @McpServer, @McpTool, @McpResource, and @McpPrompt for agent-ready servers</li>
</ul>`,
    wikiLink: 'https://github.com/Atmosphere/atmosphere/wiki/AI-LLM-Streaming',
  },
];
---

<section class="features" id="features">
  <div class="features-container">
    <div class="section-header">
      <span class="section-label">Capabilities</span>
      <h2 class="section-title">What you stop building yourself</h2>
      <p class="section-description">
        Transport fallback, reconnection, rooms, presence, clustering — the plumbing every AI chat app needs but nobody wants to maintain.
      </p>
    </div>

    <div class="features-grid">
      {features.map((feature, index) => (
        <article class="feature-card" data-feature={index} style={`--delay: ${(index * 0.1).toFixed(1)}s`} role="button" tabindex="0" aria-haspopup="dialog">
          <div class="feature-icon" set:html={feature.icon} />
          <h3 class="feature-title">{feature.title}</h3>
          <p class="feature-description">{feature.description}</p>
          <span class="feature-expand-hint">Click to explore →</span>
        </article>
      ))}
    </div>
  </div>

  <!-- Modal overlay -->
  <div class="feature-modal-overlay" id="featureModal" aria-hidden="true">
    <div class="feature-modal" role="dialog" aria-modal="true">
      <button class="feature-modal-close" aria-label="Close">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M4 4l10 10M14 4L4 14"/></svg>
      </button>

      <!-- Hero banner -->
      <div class="feature-modal-hero">
        <div class="feature-modal-hero-glow"></div>
        <div class="feature-modal-icon" id="modalIcon"></div>
        <div class="feature-modal-hero-text">
          <span class="feature-modal-label">Atmosphere 4.0</span>
          <h3 class="feature-modal-title" id="modalTitle"></h3>
        </div>
      </div>

      <div class="feature-modal-divider"></div>

      <!-- Body -->
      <div class="feature-modal-body" id="modalBody"></div>

      <!-- Footer CTA -->
      <div class="feature-modal-footer">
        <a class="feature-modal-cta" id="modalLink" href="#" target="_blank" rel="noopener">
          <span>Read the full guide</span>
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 8h10M9 4l4 4-4 4"/></svg>
        </a>
      </div>
    </div>
  </div>
</section>

<script define:vars={{ features }}>
  document.addEventListener('DOMContentLoaded', () => {
    const overlay = document.getElementById('featureModal');
    const modalIcon = document.getElementById('modalIcon');
    const modalTitle = document.getElementById('modalTitle');
    const modalBody = document.getElementById('modalBody');
    const modalLink = document.getElementById('modalLink');
    const closeBtn = overlay.querySelector('.feature-modal-close');

    function openModal(index) {
      const f = features[index];
      modalIcon.innerHTML = f.icon;
      modalTitle.textContent = f.title;
      modalBody.innerHTML = f.detail;
      modalLink.href = f.wikiLink;
      overlay.setAttribute('aria-hidden', 'false');
      overlay.classList.add('active');
      document.body.style.overflow = 'hidden';
      closeBtn.focus();
    }

    function closeModal() {
      overlay.classList.remove('active');
      overlay.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }

    document.querySelectorAll('.feature-card[data-feature]').forEach(card => {
      card.addEventListener('click', () => openModal(Number(card.dataset.feature)));
      card.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openModal(Number(card.dataset.feature)); }
      });
    });

    closeBtn.addEventListener('click', closeModal);
    overlay.addEventListener('click', (e) => { if (e.target === overlay) closeModal(); });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });
  });
</script>

<style>
  .features {
    padding: var(--space-4xl) var(--space-xl);
    background: var(--color-bg-secondary);
    position: relative;
  }

  .features::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--color-border-accent), transparent);
  }

  .features-container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .section-header {
    text-align: center;
    max-width: 600px;
    margin: 0 auto var(--space-3xl);
  }

  .section-label {
    display: inline-block;
    font-family: var(--font-mono);
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-accent);
    margin-bottom: var(--space-md);
  }

  .section-title {
    font-family: var(--font-display);
    font-size: clamp(2rem, 5vw, 2.75rem);
    font-weight: 400;
    line-height: 1.2;
    letter-spacing: -0.02em;
    margin-bottom: var(--space-md);
  }

  .section-description {
    font-size: 1.0625rem;
    color: var(--color-text-secondary);
    line-height: 1.6;
  }

  .features-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-lg);
  }

  .feature-card {
    padding: var(--space-xl);
    background: var(--color-bg-tertiary);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    transition: all 0.3s var(--ease-out-quad);
    animation: fadeInUp 0.6s var(--ease-out-expo) var(--delay) both;
    cursor: pointer;
    position: relative;
  }

  .feature-card:hover {
    border-color: var(--color-border-accent);
    transform: translateY(-4px);
    box-shadow: 0 20px 40px -20px rgba(0, 0, 0, 0.5);
  }

  .feature-card:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
  }

  .feature-expand-hint {
    display: block;
    margin-top: var(--space-md);
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--color-accent);
    opacity: 0;
    transform: translateX(-4px);
    transition: all 0.3s var(--ease-out-quad);
  }

  .feature-card:hover .feature-expand-hint {
    opacity: 1;
    transform: translateX(0);
  }

  .feature-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    background: var(--color-accent-glow);
    border-radius: 10px;
    color: var(--color-accent);
    margin-bottom: var(--space-lg);
    transition: all 0.3s var(--ease-out-quad);
  }

  .feature-card:hover .feature-icon {
    background: var(--color-accent);
    color: var(--color-bg-primary);
  }

  .feature-title {
    font-family: var(--font-body);
    font-size: 1.125rem;
    font-weight: 600;
    margin-bottom: var(--space-sm);
  }

  .feature-description {
    font-size: 0.9375rem;
    color: var(--color-text-secondary);
    line-height: 1.6;
  }

  /* ── Modal ── */
  .feature-modal-overlay {
    position: fixed;
    inset: 0;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-xl);
    background: rgba(0, 0, 0, 0);
    backdrop-filter: blur(0);
    pointer-events: none;
    transition: background 0.4s ease, backdrop-filter 0.4s ease;
  }

  .feature-modal-overlay.active {
    background: rgba(0, 0, 0, 0.75);
    backdrop-filter: blur(12px);
    pointer-events: auto;
  }

  .feature-modal {
    position: relative;
    width: min(780px, 100%);
    max-height: calc(100vh - var(--space-3xl));
    overflow-y: auto;
    overflow-x: hidden;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 20px;
    box-shadow:
      0 0 0 1px rgba(0, 212, 255, 0.08),
      0 24px 64px -16px rgba(0, 0, 0, 0.7),
      0 0 120px -40px rgba(0, 212, 255, 0.12);
    transform: translateY(32px) scale(0.95);
    opacity: 0;
    transition: transform 0.4s var(--ease-out-expo), opacity 0.35s ease;
  }

  .feature-modal-overlay.active .feature-modal {
    transform: translateY(0) scale(1);
    opacity: 1;
  }

  /* Scrollbar styling */
  .feature-modal::-webkit-scrollbar {
    width: 6px;
  }
  .feature-modal::-webkit-scrollbar-track {
    background: transparent;
  }
  .feature-modal::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 3px;
  }

  .feature-modal-close {
    position: absolute;
    top: var(--space-lg);
    right: var(--space-lg);
    z-index: 2;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-text-secondary);
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid var(--color-border);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .feature-modal-close:hover {
    color: var(--color-text-primary);
    border-color: var(--color-accent-dim);
    background: rgba(0, 212, 255, 0.08);
  }

  /* ── Hero banner ── */
  .feature-modal-hero {
    position: relative;
    display: flex;
    align-items: center;
    gap: var(--space-lg);
    padding: var(--space-2xl) var(--space-2xl) var(--space-xl);
    overflow: hidden;
  }

  .feature-modal-hero-glow {
    position: absolute;
    top: -60px;
    left: -40px;
    width: 200px;
    height: 200px;
    background: radial-gradient(circle, rgba(0, 212, 255, 0.12) 0%, transparent 70%);
    pointer-events: none;
  }

  .feature-modal-icon {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    width: 56px;
    height: 56px;
    background: linear-gradient(135deg, var(--color-accent), var(--color-accent-dim));
    border-radius: 14px;
    color: var(--color-bg-primary);
    box-shadow: 0 8px 24px -8px rgba(0, 212, 255, 0.3);
  }

  .feature-modal-hero-text {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    padding-right: var(--space-3xl);
  }

  .feature-modal-label {
    font-family: var(--font-mono);
    font-size: 0.6875rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--color-accent);
    opacity: 0.8;
  }

  .feature-modal-title {
    font-family: var(--font-display);
    font-size: 1.75rem;
    font-weight: 400;
    letter-spacing: -0.02em;
    color: var(--color-text-primary);
    line-height: 1.2;
  }

  /* ── Divider ── */
  .feature-modal-divider {
    height: 1px;
    margin: 0 var(--space-2xl);
    background: linear-gradient(90deg, var(--color-accent-dim), var(--color-border) 40%, transparent);
    opacity: 0.5;
  }

  /* ── Body ── */
  .feature-modal-body {
    padding: var(--space-xl) var(--space-2xl) var(--space-lg);
    font-size: 0.9375rem;
    line-height: 1.8;
    color: var(--color-text-secondary);
  }

  .feature-modal-body p {
    margin-bottom: var(--space-lg);
  }

  .feature-modal-body p:last-child {
    margin-bottom: 0;
  }

  .feature-modal-body strong {
    color: var(--color-text-primary);
    font-weight: 600;
  }

  .feature-modal-body code {
    font-family: var(--font-mono);
    font-size: 0.8em;
    background: rgba(0, 212, 255, 0.08);
    padding: 0.2em 0.5em;
    border-radius: 5px;
    color: var(--color-accent);
    border: 1px solid rgba(0, 212, 255, 0.1);
  }

  .feature-modal-body ul {
    list-style: none;
    padding: 0;
    margin: 0 0 var(--space-lg) 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
  }

  .feature-modal-body li {
    position: relative;
    padding-left: 1.75em;
    line-height: 1.7;
  }

  .feature-modal-body li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0.55em;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--color-accent);
    opacity: 0.5;
    box-shadow: 0 0 8px rgba(0, 212, 255, 0.3);
  }

  .feature-modal-body li strong {
    color: var(--color-text-primary);
  }

  .feature-modal-body h4 {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--color-accent);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: var(--space-md);
    padding-bottom: var(--space-xs);
    border-bottom: 1px solid rgba(0, 212, 255, 0.15);
    display: inline-block;
  }

  .feature-modal-body .detail-columns {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-lg);
    margin-bottom: var(--space-lg);
  }

  .feature-modal-body .detail-columns > div {
    padding: var(--space-lg);
    background: var(--color-bg-tertiary);
    border: 1px solid var(--color-border);
    border-radius: 12px;
  }

  .feature-modal-body .detail-columns > div p {
    margin-bottom: var(--space-sm);
    font-size: 0.875rem;
  }

  .feature-modal-body .detail-columns > div p:last-child {
    margin-bottom: 0;
  }

  .feature-modal-body .detail-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-md);
    margin: var(--space-xl) 0;
  }

  .detail-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.375rem;
    padding: var(--space-lg) var(--space-md);
    background: var(--color-bg-tertiary);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    text-align: center;
    transition: border-color 0.2s ease;
  }

  .detail-stat:hover {
    border-color: rgba(0, 212, 255, 0.25);
  }

  .detail-stat-value {
    font-family: var(--font-display);
    font-size: 1.75rem;
    font-weight: 400;
    color: var(--color-accent);
    letter-spacing: -0.02em;
    line-height: 1;
  }

  .detail-stat-label {
    font-family: var(--font-mono);
    font-size: 0.6875rem;
    color: var(--color-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.04em;
    opacity: 0.7;
  }

  /* ── Footer CTA ── */
  .feature-modal-footer {
    padding: var(--space-lg) var(--space-2xl) var(--space-2xl);
  }

  .feature-modal-cta {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    font-family: var(--font-mono);
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--color-bg-primary);
    background: var(--color-accent);
    border-radius: 10px;
    text-decoration: none;
    transition: all 0.25s ease;
    box-shadow: 0 4px 16px -4px rgba(0, 212, 255, 0.3);
  }

  .feature-modal-cta:hover {
    background: #33dfff;
    box-shadow: 0 8px 24px -4px rgba(0, 212, 255, 0.4);
    transform: translateY(-1px);
  }

  .feature-modal-cta svg {
    transition: transform 0.2s ease;
  }

  .feature-modal-cta:hover svg {
    transform: translateX(3px);
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @media (max-width: 1024px) {
    .features-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .feature-modal-body .detail-columns {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 640px) {
    .features {
      padding: var(--space-3xl) var(--space-md);
    }

    .features-grid {
      grid-template-columns: 1fr;
    }

    .feature-modal-overlay {
      padding: var(--space-sm);
    }

    .feature-modal {
      border-radius: 16px;
      max-height: calc(100vh - var(--space-lg));
    }

    .feature-modal-hero {
      flex-direction: column;
      align-items: flex-start;
      padding: var(--space-xl) var(--space-lg) var(--space-lg);
    }

    .feature-modal-hero-text {
      padding-right: 0;
    }

    .feature-modal-divider {
      margin: 0 var(--space-lg);
    }

    .feature-modal-body {
      padding: var(--space-lg);
    }

    .feature-modal-footer {
      padding: var(--space-md) var(--space-lg) var(--space-xl);
    }

    .feature-modal-cta {
      width: 100%;
      justify-content: center;
    }

    .feature-modal-body .detail-stats {
      grid-template-columns: 1fr;
    }

    .feature-expand-hint {
      opacity: 1;
      transform: translateX(0);
    }
  }
</style>
