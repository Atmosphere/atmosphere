---
const stacks = [
  {
    name: 'Spring Boot',
    version: '4.0.2+',
    icon: `<svg width="32" height="32" viewBox="0 0 32 32" fill="none">
      <path d="M16 2C8.268 2 2 8.268 2 16s6.268 14 14 14 14-6.268 14-14S23.732 2 16 2z" fill="#6DB33F"/>
      <path d="M23.6 9.1c-.3-.4-.8-.7-1.3-.7-.5 0-1 .2-1.3.6L16 16.5l-5-7.5c-.3-.4-.8-.6-1.3-.6s-1 .3-1.3.7c-.3.4-.3.9-.1 1.3l6 9c.3.4.7.6 1.2.6h.9c.5 0 .9-.2 1.2-.6l6-9c.2-.4.2-.9-.1-1.3z" fill="white"/>
    </svg>`,
    description: 'Auto-configured servlet, Spring DI bridge, and Actuator health indicator.',
    artifact: 'atmosphere-spring-boot-starter',
    config: `atmosphere:
  packages: com.example.chat`,
    configLang: 'yaml',
    configFile: 'application.yml',
    sampleUrl: 'https://github.com/Atmosphere/atmosphere/tree/main/samples/spring-boot-chat',
    badge: 'New in 4.0',
  },
  {
    name: 'Quarkus',
    version: '3.21+',
    icon: `<svg width="32" height="32" viewBox="0 0 32 32" fill="none">
      <path d="M16 2L3 9.5v13L16 30l13-7.5v-13L16 2z" fill="#4695EB"/>
      <path d="M16 8l-8 4.6v9.2L16 26.4l8-4.6v-9.2L16 8z" fill="white" opacity="0.3"/>
      <path d="M16 12l-4 2.3v4.6l4 2.3 4-2.3v-4.6L16 12z" fill="white"/>
    </svg>`,
    description: 'Build-time annotation scanning, Arc CDI, and WebSocket support.',
    artifact: 'atmosphere-quarkus-extension',
    config: `quarkus.atmosphere.packages=\\
  com.example.chat`,
    configLang: 'properties',
    configFile: 'application.properties',
    sampleUrl: 'https://github.com/Atmosphere/atmosphere/tree/main/samples/quarkus-chat',
    badge: 'New in 4.0',
  },
  {
    name: 'Servlet Container',
    version: '6.0+',
    icon: `<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <rect x="2" y="2" width="20" height="8" rx="2" ry="2"/>
      <rect x="2" y="14" width="20" height="8" rx="2" ry="2"/>
      <line x1="6" y1="6" x2="6.01" y2="6"/>
      <line x1="6" y1="18" x2="6.01" y2="18"/>
    </svg>`,
    description: 'Tomcat, Jetty, Undertow, GlassFish, Payara â€” any Servlet 6.0+ (Jakarta EE) container.',
    artifact: 'atmosphere-runtime',
    config: null,
    configLang: null,
    configFile: null,
    sampleUrl: 'https://github.com/Atmosphere/atmosphere/tree/main/samples/chat',
    badge: null,
  },
  {
    name: 'AI Streaming',
    version: 'Atmosphere AI',
    icon: `<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 3v3M12 18v3M4.9 4.9l2.1 2.1M17 17l2.1 2.1M3 12h3M18 12h3M4.9 19.1 7 17M17 7l2.1-2.1"/>
      <circle cx="12" cy="12" r="5"/>
    </svg>`,
    description: 'Use @AiEndpoint + @Prompt with StreamingSession and the built-in OpenAiCompatibleClient for Gemini, OpenAI, Ollama, and OpenAI-compatible APIs.',
    artifact: 'atmosphere-ai',
    config: `LLM_MODE=remote
LLM_MODEL=gemini-2.5-flash`,
    configLang: 'bash',
    configFile: '.env',
    sampleUrl: 'https://github.com/Atmosphere/atmosphere/tree/main/samples/spring-boot-ai-chat',
    badge: 'AI',
  },
  {
    name: 'MCP Server',
    version: 'Agent-ready',
    icon: `<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <rect x="3" y="4" width="18" height="16" rx="2"/>
      <path d="M8 9h8M8 13h5M15 13h1"/>
      <path d="M7 2v4M17 2v4"/>
    </svg>`,
    description: 'Expose tools, resources, and prompts with @McpServer/@McpTool. Connect Claude Desktop, VS Code Copilot, or Cursor via Streamable HTTP or WebSocket.',
    artifact: 'atmosphere-mcp',
    config: null,
    configLang: null,
    configFile: null,
    sampleUrl: 'https://github.com/Atmosphere/atmosphere/tree/main/samples/spring-boot-mcp-server',
    badge: 'Agents',
  },
];
---

<section class="integrations" id="integrations">
  <div class="integrations-container">
    <div class="section-header">
      <span class="section-label">Integrations</span>
      <h2 class="section-title">Frameworks + AI integrations</h2>
      <p class="section-description">
        Zero-configuration starters for your JVM stack plus first-class AI modules.
        Keep your existing framework and model SDK; Atmosphere handles real-time delivery to browsers and agents.
      </p>
    </div>

    <div class="stacks-grid">
      {stacks.map((stack, index) => (
        <article class="stack-card" style={`--delay: ${(index * 0.1).toFixed(1)}s`}>
          <div class="stack-header">
            <div class="stack-icon" set:html={stack.icon} />
            <div>
              <h3 class="stack-name">
                {stack.name}
                {stack.badge && <span class="stack-badge">{stack.badge}</span>}
              </h3>
              <span class="stack-version">{stack.version}</span>
            </div>
          </div>

          <p class="stack-description">{stack.description}</p>

          <div class="stack-artifact">
            <span class="artifact-label">Maven</span>
            <code class="artifact-id">{stack.artifact}</code>
          </div>

          {stack.config && (
            <div class="stack-config">
              <div class="config-header">
                <span class="config-file">{stack.configFile}</span>
              </div>
              <pre class="config-code"><code>{stack.config}</code></pre>
            </div>
          )}

          <a href={stack.sampleUrl} class="stack-link" target="_blank" rel="noopener noreferrer">
            View sample
            <svg width="14" height="14" viewBox="0 0 12 12" fill="none">
              <path d="M3.5 8.5L8.5 3.5M8.5 3.5H4.5M8.5 3.5V7.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </article>
      ))}
    </div>
  </div>
</section>

<style>
  .integrations {
    padding: var(--space-4xl) var(--space-xl);
    position: relative;
  }

  .integrations::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--color-border-accent), transparent);
  }

  .integrations-container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .section-header {
    text-align: center;
    max-width: 600px;
    margin: 0 auto var(--space-3xl);
  }

  .section-label {
    display: inline-block;
    font-family: var(--font-mono);
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-accent);
    margin-bottom: var(--space-md);
  }

  .section-title {
    font-family: var(--font-display);
    font-size: clamp(2rem, 5vw, 2.75rem);
    font-weight: 400;
    line-height: 1.2;
    letter-spacing: -0.02em;
    margin-bottom: var(--space-md);
  }

  .section-description {
    font-size: 1.0625rem;
    color: var(--color-text-secondary);
    line-height: 1.6;
  }

  .section-description code {
    font-family: var(--font-mono);
    font-size: 0.9em;
    color: var(--color-accent);
    background: var(--color-accent-glow);
    padding: 0.1em 0.4em;
    border-radius: 4px;
  }

  .stacks-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-lg);
  }

  .stack-card {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    padding: var(--space-xl);
    display: flex;
    flex-direction: column;
    transition: all 0.3s var(--ease-out-quad);
    animation: fadeInUp 0.6s var(--ease-out-expo) var(--delay) both;
  }

  .stack-card:hover {
    border-color: var(--color-border-accent);
    transform: translateY(-4px);
    box-shadow: 0 20px 40px -20px rgba(0, 0, 0, 0.5);
  }

  .stack-header {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
  }

  .stack-icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .stack-icon :global(svg) {
    width: 32px;
    height: 32px;
  }

  .stack-name {
    font-family: var(--font-body);
    font-size: 1.125rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: var(--space-sm);
  }

  .stack-badge {
    font-family: var(--font-mono);
    font-size: 0.625rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-accent);
    background: var(--color-accent-glow);
    padding: 0.15em 0.5em;
    border-radius: 4px;
    border: 1px solid rgba(0, 212, 255, 0.25);
  }

  .stack-version {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--color-text-muted);
  }

  .stack-description {
    font-size: 0.9375rem;
    color: var(--color-text-secondary);
    line-height: 1.6;
    margin-bottom: var(--space-lg);
    flex-grow: 1;
  }

  .stack-artifact {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    padding: var(--space-sm) var(--space-md);
    background: var(--color-bg-tertiary);
    border-radius: 6px;
    margin-bottom: var(--space-md);
  }

  .artifact-label {
    font-family: var(--font-mono);
    font-size: 0.6875rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
    padding: 0.1em 0.4em;
    background: var(--color-bg-elevated);
    border-radius: 3px;
  }

  .artifact-id {
    font-family: var(--font-mono);
    font-size: 0.8125rem;
    color: var(--color-accent);
  }

  .stack-config {
    background: var(--color-bg-tertiary);
    border: 1px solid var(--color-border);
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: var(--space-md);
  }

  .config-header {
    padding: var(--space-sm) var(--space-md);
    border-bottom: 1px solid var(--color-border);
    background: var(--color-bg-elevated);
  }

  .config-file {
    font-family: var(--font-mono);
    font-size: 0.6875rem;
    color: var(--color-text-muted);
  }

  .config-code {
    padding: var(--space-md);
    margin: 0;
    font-family: var(--font-mono);
    font-size: 0.75rem;
    line-height: 1.6;
    color: var(--color-text-secondary);
    overflow-x: auto;
    white-space: pre;
  }

  .config-code code {
    white-space: pre;
  }

  .stack-link {
    display: inline-flex;
    align-items: center;
    gap: var(--space-xs);
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-accent);
    transition: all 0.2s var(--ease-out-quad);
    margin-top: auto;
  }

  .stack-link:hover {
    color: var(--color-text-primary);
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @media (max-width: 1024px) {
    .stacks-grid {
      grid-template-columns: 1fr;
      max-width: 500px;
      margin: 0 auto;
    }
  }

  @media (max-width: 640px) {
    .integrations {
      padding: var(--space-3xl) var(--space-md);
    }
  }
</style>
